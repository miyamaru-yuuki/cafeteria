<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes">
    <title>メニュー選択画面</title>
    <style>
    </style>
    <link rel="stylesheet" type="text/css" href="/css/styles.css">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript">
        $(function() {
            function showMenu() {
                $.ajax({
                    url: "/api/cafeteria/",
                    type: "GET",
                    async: true,
                    data: null,
                    dataType: "json",
                    success: function (json) {
                        //成功時の処理
                        json.menuData.forEach(function (data) {
                            $("#menu").append('<div><a class="menulink" href="' +data.mid+ '">' +data.mname+ '</a></div>')
                        });
                    },
                    error: function () {
                        alertError()
                    }
                });
            }

            $('#fm1').submit(function(){
                var kid = $('input[name="kid"]').val();
                $('#menu').show();
                $('#fm1').hide();
                showMenu();
                return false;
            });

            $('#fm2').submit(function(){
                var kid = $('input[name="kid"]').val();
                return false;
            });

            $(document).on("click",".menulink",function(){
                $('#fm2').show();
                return false;
            });

            $('#menu').hide();
            $('#fm2').hide();
        })
    </script>
</head>
<body>
<header>
    <h1>メニュー選択画面</h1>
</header>
<nav>
</nav>
<main>
    <form id="fm1">
        <p>会員ID：<input type="number" name="kid"></p>
        <input type="submit" value="ログイン">
    </form>
    <div name="menu" id="menu">
    </div>
    <form id="fm2">
        <p>個数：<input type="number" name="kosu"></p>
        <input type="submit" value="確定">
    </form>
</main>
<footer>
</footer>
</div>
</body>
</html>
